## 팀원을 정했으니 계획을 세우자

이제 우리 팀원은 나와 K군 2명으로 정해졌고 사용할 기술 스택들과 계획을 세울 차례다.

**클라이언트 사용 기술 및 언어**

언어
- c++

엔진
- unreal 5

**서버 사용 기술 및 언어**

언어
- go
- Java

웹 프레임워크
- Echo
- Spring Boot

ORM
- Entgo
- JPA

DB
- redis
- mysql

기타
- Docker

### 클라이언트

사실 처음에 구상했던 프로젝트의 클라이언트는 웹 클라이언트였다. 리액트와 [phaser](https://phaser.io/)를 사용해 개발을 하려고했지만, k군은 게임 클라이언트로의 취업을 준비하고 있는 취업준비생이라 자바스크립트보다는 c# c++ 에 더 익숙한 상태였고 항상 유니티로만 개발을 하다가 이번에 언리얼 엔진을 공부하는 중이였다. 토이 프로젝트인만큼 모든 팀원에게 도움이 되는 경험이 되는게 가장 중요하다고 생각했고, 구상했던 프로젝트를 구현하는 것에는 언리얼도 아무 문제가 없을 것이라고 생각해 클라이언트는 언리얼로 하고 웹은 나중에 프로젝트가 어느정도 시간이 나면 클라이언트 다운로드 페이지와 프로젝트 소개 페이지 정도만 만들어 볼까 생각중이다. 만약 만든다면 vercel, netlify, heroku 등을 이용해 간단하게 배포해볼 생각이지만 아직 우선순위가 밀려있기 때문에 후순위로 미루었다. 만약 개발한다면 내가 하거나 웹 프론트엔드 팀원을 구할 것 같다.

### 서버

서버에서 클라이언트 개발은 Java-SpringBoot의 조합과 go 언어 2가지를 사용했다. 지금 구상중인 대로라면 채팅 서버와 비디오 스트리밍 서버는 Java-SpringBoot 를 사용할 예정이고, 게임 서버와 인증 서버는 go를 사용할 예정이다.

사실 처음에는 전부 자바 스프링으로 개발을 하면서 자바와 스프링에 대한 역량 강화 또한 목적에 있었다. 하지만 인증 서버와 게임 서버는 go를 사용했는데 그 이유는 아래와 같다.

일단 인증서버는 지금 시점에서는 간단히 jwt 토큰만 발급하고 이를 인증하기만 하면 되기 때문에 가볍고 빠르게 개발하고 싶었기 때문이다. 배포는 docker container로 했다. 사실 인증 서버는 Java-SpringBoot로 개발해도 큰 차이는 없긴 하다.

이에 반해 게임 서버를 go로 작성한 데에는 명확한 이유들이 있다. 

**첫번째**로는 고루틴이다. 고루틴은 간단히 말하자면 go 에서 지원하는 경량 스레드로 os에서 관리되는 스레드와는 다르게 go의 런타임에서 관리되는 가상 스레드이다. 고루틴은 생성 시에 스택 메모리 공간을 os의 스레드보다 훨씬 적게 사용해 생성시에 많은 메모리를 사용하지 않는다. 또한 컨텍스트 스위칭의 비용을 적게 소모하기 대문에 스레드 개수가 늘어나면 컨텍스트 스위칭 비용이 증가해 프로그램 성능이 떨어지는 문제가 발생하지 않는다고한다.게임 서버 프로그래밍에서는 멀티스레드를 활용해야하는데 고루틴은 이런 멀티스레드 환경에서 큰 강점을 갖는다고 생각했다.
**두번째**는 채널이다. 채널은 go에서 언어적으로 지원해주는 고루틴끼리 메시지를 전달할 수 있는 thread safe 한 메시지 큐이다. 이는 고루틴 간 메시지를 효율적으로 전달할 수 있게 해주고 생성자-소비자 패턴을 쉽게 사용할 수 있다. 뮤택스와 같은 동기화 도구를 사용하게 되면 과도한 락킹으로 오히려 성능이 하락되거나 데드락같은 문제가 발생할 수 있는데 channel를 사용하면 이런 위험성이 적어져 멀티 스레드 프로그래밍이 처음인 나한테는 큰 도움이 될 것이라고 생각해서이다. 여담으로 내가 go를 공부하면서 많은 도움을 맏은 [Tucker](https://www.youtube.com/@TuckerProgramming)님은 고루틴, 채널, 컨텍스트를 go의 3신기라고 표현하셨다.
**세번째**는 속도이다. Java는 JVM 위에서 동작하기 때문에 ByteCode를 machineCode로 변환하는 과정이 필요하지만 go는 빌드과정에서 machineCode로 변환되어 있어 속도면에서 이점을 가져간다고 생각했기 때문이다.
**마지막 이유**는 그냥 내가 go를 좋아해서이다. 결국 취업을 위해서는 Java-spring을 해야겠고 Java-spring을 공부하다보면 객체지향 설계 철학과 디자인 패턴들을 볼 수 있어서 재미있기는 하지만, 전에 일하던 회사에서 처음 접한 go는 굉장히 매력적인 언어였고 퇴사를 한 지금도 손에서 놓고 싶지 않았다. 그리고 그 회사에서는 goroutine과 channel 과 같은 go의 장점을 잘 활용할 수 있는 상황이 별로 없었고 이게 항상 아쉬웠다. 그래서 이번 프로젝트를 진행하면서 이들의 장점을 몸소 느껴보고 싶었다.

## 프로젝트 관리

프로젝트 관리는 가볍게 Notion으로 하기로 했다. 지라와 같은 것은 토이프로젝트에 너무 과하다고 생각했기 때문이다. 
브랜치 관리도 간단하게 Release 브랜치, Develop 브랜치와 Feature 브랜치들로만 구성하고 간단한 수정사항들(ex. 주석 혹은 문서의 오타 처리)는 곧바로 Develop 브랜치에 push 하는 식으로 할 예정이다. 또한 Feature 브랜치들을 생성할 때 이슈를 하나씩 생성하기로 했다.

그리고 프로젝트의 리포지토리들을 모아서 관리하기 위해 github organization 을 생성했다.

회의는 매주 일요일 오후 9시에 하고 어차피 친구랑 진행하는 프로젝트인 만큰 소통은 그냥 디스코드 혹은 카카오톡을 활용했다.

배포는 어느정도 프로젝트가 궤도에 올라 배포를 자주 하게 되면 CI/CD 환경을 세팅할 생각이다. 아마 Travis CI 확은 Github Action을 사용할 것 같다. Jenkins는 전에 사용해본적이 있어 익숙하긴 하지만 직접 서버를 구축해야하는데, 돈없는 취업준비생들로만 이루어진 팀한테는 서버비 한푼이 아쉽기 때문에 사용하지 않을 것 같다.

> [프로젝트 관리 노션 링크](https://freezing-dash-047.notion.site/OUR-PLAYGROUND-c33912634c2c4ba5873eb0794ccf3caf)
[github organization](https://github.com/Team-OurPlayground)

![이제부턴 정말 개발 뿐이야.](../../images/%EA%B0%9C%EB%B0%9C_%EB%BF%90%EC%9D%B4%EC%95%BC.png)

이제부턴 정말 개발 뿐이다.
